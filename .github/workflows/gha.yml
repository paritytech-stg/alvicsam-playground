name: hello-world
on:
  push:
  merge_group:
jobs:
  hello-world:
    runs-on: ubuntu-latest
    steps:
      - name: Fail in a merge queue
        # if: ${{ startsWith(env.GITHUB_REF_NAME, 'gh-readonly-queue') }}
        # clunky way to check if it works
        run: |
          echo "env.GITHUB_REF_NAME: ${{ env.GITHUB_REF_NAME }}"
          echo "GITHUB_REF_NAME: $GITHUB_REF_NAME"
          echo $GITHUB_REF_NAME | grep gh-readonly-queue && exit 1 || echo continue
      - name: my-step
        run: |
          echo "Hello World!"
          echo "PR Num: ${{ github.event.pull_request.number }}"
          echo "MG Var: ${{ github.event.merge_group }}"
          env | grep GITHUB
