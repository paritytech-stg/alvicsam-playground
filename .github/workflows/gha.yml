name: self-hosted-runner-default
on:
  push:
  merge_group:

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

jobs:
  hello-world:
    runs-on: arc-runners-default
    container:
      image: ${{ vars.CI_UNIFIED_IMAGE }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - uses: oleksiyrudenko/gha-git-credentials@v2
        with:
          token: "${{ secrets.GITHUB_TOKEN }}"
      - name: hello
        run: |
          ls -la
          cat .git/config
          time git clone https://github.com/paritytech/polkadot-sdk.git
          cd polkadot-sdk
          ls
          cat .git/config
          # env
          # sleep 100
  hello-world2:
    runs-on: arc-runners-default
    container:
      image: ${{ vars.CI_UNIFIED_IMAGE }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - uses: de-vri-es/setup-git-credentials@v2
        with:
          credentials: "GitHub:${{ secrets.GITHUB_TOKEN }}"
      - name: hello
        run: |
          ls -la
          cat .git/config
          time git clone https://github.com/paritytech/polkadot-sdk.git
          echo "---------------------------------------------------"
          cd polkadot-sdk
          ls
          cat .git/config
          echo "---------------------------------------------------"
          cat $XDG_CONFIG_HOME/git/credentials
      # - name: fail me
      #   run: |
      #     exit 1
  # hello-world3:
  #   runs-on: arc-runners-default
  #   strategy:
  #     fail-fast: false
  #     matrix:
  #       network: [rococo, westend]
  #   steps:
  #     - name: run ${{ matrix.package }}
  #       run: |
  #         echo "Running ${{ matrix.network }}"
  #         env
  #         # sleep 100
  # hello-world4:
  #   runs-on: arc-runners-default
  #   container:
  #     image: "paritytech/ci-unified:bullseye-1.74.0-2023-11-01-v20231204"
  #   steps:
  #     - name: run ${{ matrix.package }}
  #       run: |
  #         echo "Running ${{ matrix.network }}"
  #         env
  #         # sleep 100
