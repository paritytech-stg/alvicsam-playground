name: self-hosted-runner-default
on:
  push:
  merge_group:

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true
env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  CI_IMAGE: "paritytech/ci-unified:bullseye-1.74.0-2023-11-01-v20231204"

permissions:
  actions: read

jobs:
  hello-world:
    runs-on: arc-runners-default
    # container:
    #   image: "paritytech/ci-unified:bullseye-1.74.0-2023-11-01-v20231204"
    steps:
      - name: hello
        run: |
          echo "Hello World!"
          env
          sleep 5
  hello-world2:
    runs-on: arc-runners-default
    # container:
    #   image: "paritytech/ci-unified:bullseye-1.74.0-2023-11-01-v20231204"
    steps:
      - name: fail me
        run: |
          exit 1
  hello-world3:
    runs-on: arc-runners-default
    strategy:
      fail-fast: false
      matrix:
        network: [rococo, westend]
    steps:
      - name: run ${{ matrix.package }}
        run: |
          echo "Running ${{ matrix.network }}"
          env
