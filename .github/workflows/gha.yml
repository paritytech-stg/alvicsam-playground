name: self-hosted-runner-default
on:
  push:
  merge_group:

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

jobs:
  hello-world:
    # runs-on: arc-runners-default
    runs-on: ubuntu-latest
    container:
      image: ${{ vars.CI_UNIFIED_IMAGE }}
      # image: europe-docker.pkg.dev/parity-ci-2024/ci-images/ci-unified:bullseye-1.75.0
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: hello
        run: |
          echo "Installing iproute2..."
          apt-get update && apt-get install -y iproute2 iputils-ping
          # ip a
          # echo "Enabling loopback interface explicitly..."
          # ip link set lo up
          echo "Result"
          ip a
          ping -c 1 127.0.0.1
          echo "Starting a simple HTTP server..."
          python3 -m http.server --bind 127.0.0.1 8080 &
          sleep 1
          curl 127.0.0.1:8080
  # hello-world2:
  #   runs-on: arc-runners-default
  #   container:
  #     image: ${{ vars.CI_UNIFIED_IMAGE }}
  #   steps:
  #     - name: fail me
  #       run: |
  #         exit 1
  # hello-world3:
  #   runs-on: arc-runners-default
  #   strategy:
  #     fail-fast: false
  #     matrix:
  #       network: [rococo, westend]
  #   steps:
  #     - name: run ${{ matrix.package }}
  #       run: |
  #         echo "Running ${{ matrix.network }}"
  #         env
  #         # sleep 100
  # hello-world4:
  #   runs-on: arc-runners-default
  #   container:
  #     image: "paritytech/ci-unified:bullseye-1.74.0-2023-11-01-v20231204"
  #   steps:
  #     - name: run ${{ matrix.package }}
  #       run: |
  #         echo "Running ${{ matrix.network }}"
  #         env
  #         # sleep 100
